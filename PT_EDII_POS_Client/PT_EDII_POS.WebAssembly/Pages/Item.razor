@page "/item/create"
@using System.ComponentModel.DataAnnotations
@using PT_EDII_POS.WebAssembly.Model
@inject HttpClient HttpClient

<EditForm Model="Model" OnValidSubmit="Submit" FormName="Starship2">
  <DataAnnotationsValidator />
  <ValidationSummary />
  <div class="mb-3">
    <label class="form-label">
      Nama Barang :
      <InputText class="form-control" @bind-Value="Model.NamaBarang" />
    </label>
  </div>
  <div class="mb-3">
    <label class="form-label">
      Harga :
      <InputNumber class="form-control" @bind-Value="Model.Harga" />
    </label>
  </div>
  <div class="mb-3">
    <label class="form-label">
      Stok Awal:
      <InputNumber class="form-control" @bind-Value="Model.StokAwal" />
    </label>
  </div>
  <div class="mb-3">
    <label class="form-label">
      Kategori :
      <InputText class="form-control" @bind-Value="Model.Kategori" />
    </label>
  </div>
  <div class="mb-3">
    <label class="form-label">
      Gambar :
      <InputFile class="form-control" @bind-Value="Model.Gambar" />
    </label>
    <button class=" btn btn-outline-dark" type="submit">Submit</button>
  </div>
</EditForm>

@code {
  [SupplyParameterFromForm]
  private CreateItemCommand Model { get; set; }

  protected override void OnInitialized() => Model ??= new();

  private void Submit()
  {
    HttpClient.PostAsJsonAsync("http://localhost:5125", Model);
  }

}
